{% extends 'Sciences/base.html' %}
{% load static %}
{% load humanize %}

{% block title %}
    Perfil de Usuario
{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{% static 'css/social/profile.css' %}">
<link rel="stylesheet" type="text/css" href="https://necolas.github.io/normalize.css/8.0.1/normalize.css">
<link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous" />
{% endblock %}

{% block header %}
<header>
    <div class="header-container">
        <div class="logo">
            <a href="{% url 'home' %}" id="change" class="logo-btn">
                <img src="{% static 'img/microscopio.png' %}" alt="Logo" class="logo-img">
                SciencesPath!
            </a>
        </div>
        <nav>
            <a href="{% url 'profile' request.user %}">Mi Perfil</a>
            <a href="#comunity">Comunidad</a>
            <a href="#questions">Preguntas Frecuentes</a>
            {% if user.is_authenticated %}
                <a href="{% url 'logout' %}">Cerrar Sesión</a>
            {% else %}
                <a href="{% url 'login' %}">Iniciar Sesión</a>
            {% endif %}
        </nav>
    </div>
</header>
{% endblock %}

{% block content %}
<div class="container">
    <section class="seccion-perfil-usuario">
        <div class="perfil-usuario-header">
            <div class="perfil-usuario-portada">
                <div class="perfil-usuario-avatar">
                    <img src="{{ user.profile.image.url }}" alt="img-avatar">
                </div>
                {% if request.user.is_authenticated %}
                    {% if user.username != request.user.username %}
                        {% if user not in request.user.profile.following %}
                            <a href="{% url 'follow' user %}"><button type="button" class="boton-portada1">
                                <i class="far fa-solid fa-plus"></i> Seguir
                            </button></a> 
                        {% else %}
                            <a href="{% url 'unfollow' user %}"><button type="button" class="boton-portada3">
                                <i class="far fa-solid fa-minus"></i> Dejar de seguir
                            </button></a>
                        {% endif %}
                    {% else %}
                        {% if user.profile.is_student %}
                            <a href="{% url 'edit' %}"><button type="button" class="boton-portada3">
                                <i class="far fa-regular fa-file"></i> Mi Expediente
                            </button></a>
                            <a href="{% url 'edit' %}"><button type="button" class="boton-portada2">
                                <i class="far fa-regular fa-calendar-alt"></i> Mi Horario
                            </button></a>
                        {% endif %}
                        <a href="{% url 'edit' %}"><button type="button" class="boton-portada1">
                            <i class="far fa-image"></i> Editar Perfil
                        </button></a> 
                    {% endif %}

                {% endif %}

            </div>
        </div>
        <div class="perfil-usuario-body">
            <div class="perfil-usuario-bio">
                <h4 class="titulo">@{{ user.username }}</h4>
                {% if user.first_name %}<h5 class="titulo titulo2">{{ user.first_name }}{% if user.last_name %} {{ user.last_name }}{% endif %}</h5>{% endif %}
                <p class="texto">{{ user.profile.bio }}</p>
            </div>
            <div class="perfil-usuario-footer">
                <h3 class="titulo">Datos personales:</h3>
                <ul class="lista-datos">
                    <li><i class="icono fas fa-briefcase"></i> Estudiante del Grado en Ciencias:
                        {% if user.profile.is_student %}
                            SI.
                        {% else %}
                            NO.
                        {% endif %}
                    </li>
                    <li><i class="icono fas fa-map-signs"></i> Direccion: {{ user.profile.address|default:"No especificado" }}</li>
                    <li><i class="icono fas fa-phone-alt"></i> Telefono: {{ user.profile.phone_number|default:"No especificado" }}</li>
                    <li><i class="icono fas fa-solid fa-envelope"></i> Correo electrónico: {{ user.email }}</li>
                </ul>
                <ul class="lista-datos">
                    <li><i class="icono fas fa-calendar-alt"></i> Fecha de nacimiento: {{ user.profile.birth_date|date:"d/m/Y"|default:"No especificado" }}</li>
                    <li><i class="icono fas fa-solid fa-clock"></i>Se unió a SciencesPath! el: {{ user.date_joined|date:"d/m/Y" }}.</li>
                    <li><i class="icono fas fa-solid fa-user-plus"></i> Seguidores: {{ user.profile.followers.count }}.</li>
                    <li><i class="icono fas fa-user-check"></i> Seguidos: {{ user.profile.following.count }}.</li>
                    {% if user.profile.is_student %}
                    {% endif %}
                </ul>
            </div>
            {% if user.profile.is_student %}
                <div class="perfil-usuario-footer">
                    <h3 class="titulo">Datos universitarios:</h3>
                    <ul class="lista-datos">
                        <li><i class="icono fas fa-building"></i> Universidad: {{ user.profile.university|default:"No especificado" }}</li>
                        <li><i class="icono fas fa-regular fa-envelope"></i> Correo universitario: {{ user.profile.university_email|default:"No especificado" }}</li>
                    </ul>
                    <ul class="lista-datos">
                        <li><i class="icono fas fa-graduation-cap"></i> Curso: {{ user.profile.year|default:"No especificado" }}.</li>
                        <li><i class="icono fas fa-book"></i> Créditos superados: {{ user.profile.credits_passed }}.</li>
                    </ul>
                </div>
            {% endif %}
            <div class="redes-sociales">
                {% if user.profile.facebook_url %}
                    <a href="{{ user.profile.facebook_url }}" target="blank_" class="boton-redes facebook fab fa-facebook-f"><i class="icon-facebook"></i></a>
                {% else %}
                    <a href="" class="boton-redes facebook fab fa-facebook-f"><i class="icon-facebook"></i></a>
                {% endif %}
                {% if user.profile.twitter_url %}
                    <a href="{{ user.profile.twitter_url }}" target="blank_" class="boton-redes twitter fab fa-twitter"><i class="icon-twitter"></i></a>
                {% else %}
                    <a href="" class="boton-redes twitter fab fa-twitter"><i class="icon-twitter"></i></a>
                {% endif %}
                {% if user.profile.instagram_url %}
                    <a href="{{ user.profile.instagram_url }}" target="blank_" class="boton-redes instagram fab fa-instagram"><i class="icon-instagram"></i></a>
                {% else %}
                    <a href="" class="boton-redes instagram fab fa-instagram"><i class="icon-instagram"></i></a>
                {% endif %}
                
            </div>
        </div>
    </section>
<div class="container">
{% endblock %}